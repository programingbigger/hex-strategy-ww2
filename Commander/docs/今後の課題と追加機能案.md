# 📝 今後の課題と追加機能案

このドキュメントは、現在のゲーム「Commander」の実装を分析し、今後追加・改善が必要と考えられる機能や要素をまとめたものです。

---

## 1. 最優先で実装すべき機能

これらの機能は、ゲームとして最低限の体験を成立させるために不可欠です。

### 1.1. 敵ユニットのAI (思考ルーチン)
*   **現状**: `activeTeam` が 'Red' に切り替わっても、敵ユニットは一切行動しません。プレイヤーが手動で操作する必要があります。
*   **課題**: 1人用ゲームとして成立させるには、敵AIが状況を判断し、自律的にユニットを移動させたり、攻撃したりするロジックが必須です。
*   **実装案**:
    1.  各敵ユニットが、攻撃可能なプレイヤーユニットを探す。
    2.  攻撃対象がいない場合、最も近いプレイヤーユニットや都市に向かって移動する。
    3.  `useGameLogic.ts` の `handleEndTurn` 内で、`activeTeam` がAIのチームになった際にAIの行動ロジックを呼び出すようにする。

### 1.2. ゲームのセーブ＆ロード機能
*   **現状**: ゲームの状態はメモリ上にしか存在せず、ブラウザを閉じると全てリセットされます。
*   **課題**: 長時間プレイが想定される戦略ゲームにおいて、進行状況を保存し、後で再開する機能は必須です。
*   **実装案**:
    1.  現在のゲーム状態（`turn`, `units` の配列, `boardLayout` の状態など）をJSON形式でシリアライズする。
    2.  シリアライズしたデータをブラウザの `localStorage` に保存する。
    3.  ホーム画面に「ロード」ボタンを追加し、`localStorage` からデータを読み込んでゲーム状態を復元する。

---

## 2. ゲーム体験を向上させる重要機能

これらの機能は、ゲームをより面白く、没入感のあるものにするために重要です。

### 2.1. ユニットの成長・レベルアップ
*   **現状**: ユニットは戦闘で `xp` を獲得しますが、100に達しても何も起こりません。
*   **課題**: ユニットが成長する要素は、プレイヤーにとってユニットを大切に扱う動機付けになり、戦略に深みを与えます。
*   **実装案**:
    *   `xp` が100に達したユニットはレベルアップし、攻撃力や防御力などのステータスがわずかに上昇する。
    *   レベルアップしたユニットは見た目が変わる、特別なアイコンが付くなどの視覚的なフィードバックを提供する。

### 2.2. サウンドエフェクトとBGM
*   **現状**: `assets/audio` フォルダは存在するものの、音声再生のロジックは実装されていません。
*   **課題**: 音によるフィードバックは、ゲームの雰囲気を盛り上げ、プレイヤーの操作に対する応答性を高める上で極めて重要です。
*   **実装案**:
    *   BGMをシーン（ホーム画面、戦闘画面）ごとに再生する。
    *   ユニットの移動、攻撃、被弾、都市の占領などのアクションに対応する効果音を再生する。

### 2.3. 戦闘や移動のアニメーション
*   **現状**: ユニットの移動は瞬時に行われ、戦闘は `BattleReportModal` が表示されるだけで、視覚的な演出がありません。
*   **課題**: アニメーションは、ゲームの状況を直感的に理解しやすくし、見ていて楽しい体験を提供します。
*   **実装案**:
    *   ユニットが移動経路に沿ってスムーズに動くアニメーションを実装する。
    *   攻撃時には、攻撃ユニットから弾が飛んでいくような簡易的なアニメーションや、被弾時の爆発エフェクトを追加する。

---

## 3. より高度な戦略性を加える拡張機能

ゲームにさらなる深みとリプレイ性を与えるための機能案です。

### 3.1. 視界と索敵（Fog of War）
*   **現状**: マップ上のすべての敵ユニットが最初から見えています。
*   **提案**: 各ユニットに「視界」のパラメータを設け、自軍ユニットの視界内に入っている敵ユニットのみを表示するようにします。これにより、偵察の重要性が増し、戦略性が大幅に向上します。

### 3.2. ユニットの生産
*   **現状**: ゲーム開始時のユニット構成で最後まで戦う必要があります。
*   **提案**: 都市や工場などの特定の建物から、資金を消費して新しいユニットを生産できるようにします。これにより、戦況に応じた柔軟な戦略が可能になります。

### 3.3. 司令官ユニットと特殊能力
*   **現状**: ゲーム名は「Commander」ですが、司令官に相当するユニットや概念が存在しません。
*   **提案**: 特殊な「司令官ユニット」を導入し、そのユニットが持つオーラ（範囲内の味方の能力を向上させるなど）や、ターンに一度だけ使える強力なスキル（範囲攻撃、緊急修復など）を追加します。
