# 現行ゲームバージョンにおける不足要素の分析

このドキュメントは、現在の「Gemini Saga: Hex Strategy」のソースコードを分析し、一般的な戦略シミュレーションゲームと比較して、現状実装されていない、あるいは不足している主要な機能要素をリストアップしたものです。

---

## 1. ゲームプレイの核となる機能

### 1.1. 戦闘システム

-   **反撃の概念**
    - ~~現在の戦闘は攻撃側から防御側への一方的なものです。防御側ユニットが攻撃された際に自動的に反撃するシステムがありません。~~
    - 結果の部分を、自軍ユニットがいくらの損害を受け、相手ユニットにはどのくらいの損害を与えたのかをわかりやすくする

-   **遠距離攻撃**
    - ~~すべてのユニットは隣接したタイルにしか攻撃できません。弓兵や砲兵のような、離れた敵を攻撃できるユニットやメカニクスが存在しません。~~
    - 遠距離ユニットも反撃されてしまうので、そこは改善する

-   **経験値とレベルアップ**: ~~ユニットは戦闘を経験しても成長しません。経験値（XP）を獲得してレベルアップし、ステータスが向上するようなRPG要素はありません。~~
    - ~~ステップ１：経験値を設定する。経験値のMaxは100くらいに設定~~
    - ~~ステップ２：経験値は、相手のHPを削った分だけ増える。つまり相手へダメージを与えた分だけ、自分の経験値が増える~~
    - ゲームをしていく中で、フィードバックをもらい、改善していく
    - 歩兵ユニットで、占領時に、経験値を付与できるようにする

- **燃料の概念**
    - ユニットそれぞれに燃料の概念を持たせるを持たせる
        - 歩兵:60
        - 装甲車：60
        - 戦車：40
        - 対戦車：40
        - 砲兵：40
    - 燃料が減る時は、移動分だけ減るようにする
        - なんMovement分動いたか
    - infoPanelに現在の燃料の分を表示する

-   **ZOC（Zone of Control / 支配領域）**
    - ~~敵ユニットの隣を通過しても、移動が停止したり、追加の移動コストを消費したりすることはありません。ZOCの概念がないため、敵の戦線を容易に突破できてしまいます。~~
    - ~~検証すること（ざっとプレイしてみた感じいけてそう）~~
    - 検証した感じ、攻撃側がZOCのゾーンに入ろうとすると、攻撃できない時がある。おそらくZOCは1hexで移動力がどのくらい削れるという設定があるのだろう。それによって、山に歩兵が入って打つことができないといった事象が起きているので、改修する必要がある。

### 1.2. ユニットとマップの多様性

-   **ユニットの特殊能力**: 全てのユニットは基本的なステータス（HP、攻撃、防御、移動）しか持っていません。特定の地形に強い、一度に複数の敵を攻撃できる、味方を回復させるなどのユニークなスキルやアビリティが存在しません。
    - 自軍のユニットが、相手軍の攻撃対象のユニットを攻撃できる範囲に入っていたら、同時に攻撃することができるようにする
        - ただし、同時に攻撃できた際は、攻撃した自軍ユニットは行動不可能になる
        - この時、戦闘の計算ロジックは変えず、自軍ユニット数の分だけ攻撃できるように設定する。

-   **ユニットの生産・購入**: ゲーム開始時のユニット構成が固定されており、ゲーム中に新たなユニットを生産したり購入したりする機能がありません。これにより、戦略の幅が限定されています。

-   **建造物や拠点の概念**
    - 都市や工場、司令部といった、占領することでリソース収入を得たり、ユニットの生産拠点となったりするような特殊なタイルが存在しません。
    - ~~都市の設定は完了。~~
    - 占領
        - ~~占領によって、色が変わる~~
        - ~~占領できるかどうか選択させるボタンの設定~~
        - ~~占領ロジックを、都市にHPがあるかのような設定にする~~
        - ~~2ターン時に、すぐに占領されてしまうので、改修（多分上記設定をすれば、いい感じになると思う）~~
            - ~~上記の改修はできたが、再度の占領ができないので、そこを改修する~~
        - 毎ターン毎ターン、ターン関係なしに、+1回復してしまうので、そこを修正する
            - 修正案としては、自分のターンになった時だけ、+1の回復をするように設計する
        - ユニットの回復ができる
            - 現在、ユニットは自軍関係なく、勝手に入ったら回復してしまうので、そこを修正する
    - 首都の設定
        - 首都は占領されたら、ゲームオーバー
        - 占領のロジックは踏襲

- 天候ロジック
    - ~~ユニットの移動が変わる~~
    - 索敵範囲が変わる
    - 地形の特徴が変化
        - ~~基本的な部分はok~~
        - 連続して雨と大雨（storm）によって、加算値(newDuration)が、4以上を超えていた場合、次の日が晴れでも、泥沼の地形は変わらない。泥沼解除条件晴れによって、newDuration-2の減算後、newDuration=1or0になった際に、泥沼が平地になる。というロジックを入れる。このロジックを検証するためには、生成AIによって、パターンの総当たり戦を行わせ、意図した挙動になるかを確認する。

### 1.3. 勝利・敗北条件

-   **多様な勝利条件**: 現在の勝利条件は「敵ユニットの全滅」のみです。特定の重要拠点（HQ）を占領する、一定ターン数を生き延びる、といった多様な勝利・敗北条件がありません。

## 2. AI（人工知能）

-   **対戦相手としてのAIの不在**: 現在、AIは戦闘レポートの文章生成にのみ使用されています。敵チームのユニットを自律的に思考し、移動や攻撃の判断を行う対戦相手としてのAIは実装されていません。そのため、現状では人間同士の対戦（ホットシートモード）しかプレイできません。

## 3. UI/UX（ユーザー体験）

-   **詳細なUndo（アンドゥ）機能**: ~~現在の「戻る」機能は、移動後に攻撃していなければ移動前の位置に戻すことしかできません。より複雑な行動（待機、複数回の移動など）を取り消すための、複数ステップを遡れるアンドゥ機能がありません。~~
⇨ほぼ実装できた

-   **ゲーム内チュートリアル/ヘルプ**: ゲームのルールや操作方法を説明するチュートリアルや、ユニット・地形の詳細を確認できるヘルプ機能がありません。

- **ゲームスタート画面**: スタート画面の作成

-   **設定オプション**: 音量調整、グラフィック設定、キーコンフィグなどの設定を変更する画面がありません。

## 4. オーディオ・ビジュアル

-   **アニメーション**: ユニットが移動する際や攻撃する際のアニメーションがありません。ユニットはタイル間を瞬間移動します。

-   **サウンドエフェクトとBGM**: ゲームを盛り上げるBGMや、ユニットの移動音、攻撃音、UIのクリック音などのサウンドエフェクトが一切ありません。

## 5. その他

-   **セーブ・ロード機能**: ゲームの進行状況を保存し、後で再開するためのセーブ・ロード機能がありません。



