# 🎨 ゲーム仕様書：Hex Strategy Tactics (Alpha)

### 1. ゲーム概要
* **ゲームタイトル案**: Hex Strategy Tactics
* **テーマ**: 第二次世界大戦をモチーフにした、ターン制のヘックス戦略シミュレーションゲーム。
* **勝利条件**: 
    1. 敵のユニットを全て殲滅する。
    2. マップ上に存在する全ての都市を占領する。

### 2. ユニット特性
各ユニットは異なる能力を持ち、戦況に応じて使い分けることが重要です。

| ユニット種別 | クラス | 最大HP | 移動力 | 燃料 | 攻撃範囲 | 対車両攻撃 | 対歩兵攻撃 | 車両防御 | 歩兵防御 | 反撃 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **歩兵 (Infantry)** | 歩兵 | 10 | 3 | 60 | 1 | 4 | 4 | 2 | 2 | 可 |
| **戦車 (Tank)** | 車両 | 20 | 4 | 40 | 1 | 7 | 7 | 5 | 5 | 可 |
| **装甲車 (ArmoredCar)** | 車両 | 15 | 6 | 60 | 1 | 5 | 5 | 4 | 4 | 可 |
| **対戦車砲 (AntiTank)** | 歩兵 | 10 | 1 | 40 | 1 | 8 | 4 | 6 | 2 | 可 |
| **砲兵 (Artillery)** | 歩兵 | 12 | 1 | 40 | 2-5 | 8 | 8 | 3 | 3 | 不可 |

### 3. 地形特性
地形はユニットの移動や戦闘に大きな影響を与えます。

| 地形 | 防御ボーナス | 攻撃ボーナス | 移動コスト(歩兵) | 移動コスト(車両) |
| :--- | :--- | :--- | :--- | :--- |
| **平原 (Plains)** | 0 | 0 | 1 | 1 |
| **森林 (Forest)** | +2 | 0 | 1 | 2 |
| **山岳 (Mountain)** | +3 | +2 | 2 | ∞ (通行不可) |
| **川 (River)** | -2 | -1 | 2 | ∞ (通行不可) |
| **道路 (Road)** | -1 | 0 | 1 | 1 |
| **橋 (Bridge)** | -1 | 0 | 1 | 1 |
| **都市 (City)** | +3 | +1 | 1 | 1 |
| **泥 (Mud)** | -1 | 0 | 2 | 3-4 |

* **都市**: 占領することが可能。占領したチームのユニットは、都市に留まることでHPが回復し、燃料が補給されます。
* **天候**: 「晴れ」「雨」「豪雨」があり、天候によって「平原」が「泥」に変わるなど、地形が変化することがあります。

### 4. 基本ルールと流れ
1.  **ターン制**: BlueチームとRedチームが交互にターンを進行します。
2.  **ユニットの行動**: プレイヤーは自分のターンに、各ユニットを1回ずつ行動させることができます。
3.  **アクション**: 
    * **移動**: ユニットを移動範囲内のヘックスに動かします。
    * **攻撃**: 攻撃範囲内の敵ユニットを攻撃します。
    * **占領**: 歩兵ユニットが都市のヘックスにいる場合、「占領」コマンドで都市の所有権を奪うことができます。
    * **待機**: 行動を終了します。
    * **やり直し**: 移動後、まだ攻撃や他の行動をしていない場合、移動を取り消すことができます。
4.  **ターン終了**: 全てのユニットの行動が終了したら、「ターン終了」ボタンを押して相手のターンに移ります。

### 5. UI概要
*   **ヘッダー (Header)**: 現在のターン数、天候、チーム情報、ユニット数を表示します。**新たに「セーブ」「ロード」ボタンが配置されます。**
*   **ゲームボード (GameBoard)**: ヘックスで構成されたメインのゲーム画面。
*   **情報パネル (InfoPanel)**: カーソルを合わせたヘックスやユニットの情報を表示します。
*   **戦闘レポート (BattleReportModal)**: 戦闘結果をモーダルウィンドウで表示します。

### 6. ゲーム状態の保存と読み込み (JSON)
ゲームの進行状況は、JSON形式で保存・読み込みが可能です。

#### 6.1. 機能
*   **保存 (Save)**: ヘッダーの「セーブ」ボタンを押すと、現在のゲーム状態がJSONファイル（`save_data.json`など）としてローカルにダウンロードされます。
*   **読み込み (Load)**: ヘッダーの「ロード」ボタンを押すと、ファイル選択ダイアログが開きます。プレイヤーが以前に保存したJSONファイルを選択すると、その時点のゲーム状態が復元されます。

#### 6.2. JSONデータ構造 (スキーマ)
保存されるJSONファイルは以下の構造を持ちます。

```json
{
  "gameStatus": {
    "gameState": "playing",
    "turn": 5,
    "activeTeam": "Blue",
    "winner": null,
    "weather": "Rain",
    "weatherDuration": 2
  },
  "board": {
    "tiles": [
      { "x": -12, "y": -6, "terrain": "Mountain" },
      { "x": -11, "y": -6, "terrain": "Plains" },
      { "x": 0, "y": 0, "terrain": "City", "owner": "Blue", "hp": 8, "maxHp": 10 }
      // ... 他のすべてのタイル情報
    ]
  },
  "units": [
    {
      "id": "u-0",
      "type": "Tank",
      "team": "Blue",
      "x": -5,
      "y": 0,
      "hp": 18,
      "fuel": 35,
      "xp": 12,
      "moved": false,
      "attacked": false
    },
    {
      "id": "u-15",
      "type": "Infantry",
      "team": "Red",
      "x": 2,
      "y": 3,
      "hp": 7,
      "fuel": 58,
      "xp": 5,
      "moved": true,
      "attacked": true
    }
    // ... 他のすべてのユニット情報
  ]
}
```
