# 🎨 ゲーム仕様書：Hex Strategy Tactics (Beta)

### 1. ゲーム概要
* **ゲームタイトル案**: Hex Strategy Tactics
* **テーマ**: 第二次世界大戦をモチーフにした、ターン制のヘックス戦略シミュレーションゲーム。
* **勝利条件**: 
    1. 敵のユニットを全て殲滅する。
    2. 敵の首都を占領する。

### 2. ユニット特性
各ユニットは異なる能力を持ち、戦闘や占領を通じて**経験値(XP)**を獲得し、成長します。

| ユニット種別 | クラス | 最大HP | 移動力 | **最大燃料** | 攻撃範囲 | 対車両攻撃 | 対歩兵攻撃 | 車両防御 | 歩兵防御 | 反撃 | **経験値(XP)** |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **歩兵 (Infantry)** | 歩兵 | 10 | 3 | 60 | 1 | 4 | 4 | 2 | 2 | 可 | 0-100 |
| **戦車 (Tank)** | 車両 | 20 | 4 | 40 | 1 | 7 | 7 | 5 | 5 | 可 | 0-100 |
| **装甲車 (ArmoredCar)** | 車両 | 15 | 6 | 60 | 1 | 5 | 5 | 4 | 4 | 可 | 0-100 |
| **対戦車砲 (AntiTank)** | 歩兵 | 10 | 1 | 40 | 1 | 8 | 4 | 6 | 2 | 可 | 0-100 |
| **砲兵 (Artillery)** | 歩兵 | 12 | 1 | 40 | 2-5 | 8 | 8 | 3 | 3 | **不可** | 0-100 |

*   **経験値とレベルアップ**: ユニットは敵にダメージを与えるか、都市を占領することで経験値(XP)を獲得します。XPが100に達するとレベルアップし、ステータスが向上します（具体的な向上内容は別途定義）。
*   **燃料**: ユニットは移動する際に燃料を消費します。燃料は地形によって消費量が変動します。燃料が尽きると、そのターンはそれ以上移動できません。

### 3. 地形と天候
地形はユニットの移動や戦闘に影響を与え、天候によってその特性が変化します。

| 地形 | 防御ボーナス | 攻撃ボーナス | 移動コスト(歩兵) | 移動コスト(車両) |
| :--- | :--- | :--- | :--- | :--- |
| **平原 (Plains)** | 0 | 0 | 1 | 1 |
| **森林 (Forest)** | +2 | 0 | 1 | 2 |
| **山岳 (Mountain)** | +3 | +2 | 2 | ∞ (通行不可) |
| **川 (River)** | -2 | -1 | 2 | ∞ (通行不可) |
| **道路 (Road)** | -1 | 0 | 1 | 1 |
| **橋 (Bridge)** | -1 | 0 | 1 | 1 |
| **都市 (City)** | +3 | +1 | 1 | 1 |
| **泥 (Mud)** | -1 | 0 | 2 | 3-4 |

*   **都市と回復**: **自軍が所有する都市**にターン開始時にいるユニットは、HPが2回復し、燃料が最大まで補給されます。敵軍の都市では回復しません。
*   **天候システム**:
    *   **種類**: 「晴れ」「雨」「豪雨」が存在します。
    *   **地形変化**: 「雨」や「豪雨」が一定期間続くと、「平原」が「泥」に変化します。「晴れ」が続くと「泥」は「平原」に戻ります。

### 4. 基本ルールと流れ
1.  **ターン制**: BlueチームとRedチームが交互にターンを進行します。
2.  **ユニットの行動**: プレイヤーは自分のターンに、各ユニットを1回ずつ行動させることができます。
3.  **アクション**:
    *   **移動**: ユニットを移動範囲内のヘックスに動かします。移動には**地形に応じた燃料**を消費します。
    *   **攻撃**: 攻撃範囲内の敵ユニットを攻撃します。与えたダメージ分、経験値を獲得します。**砲兵は反撃を受けません。**
    *   **占領**: 歩兵ユニットが敵の都市/首都ヘックスにいる場合、「占領」コマンドで所有権を奪います。都市にはHPがあり、0にすると占領完了となり、経験値を獲得します。
    *   **待機**: 行動を終了します。
    *   **やり直し**: 移動後、まだ攻撃や他の行動をしていない場合、移動を取り消すことができます。
4.  **ZOC (Zone of Control)**: 敵ユニットに隣接するヘックスへの進入には、追加で2の移動コストが必要になります。これにより、敵の戦線を容易には突破できません。
5.  **ターン終了**: 全てのユニットの行動が終了したら、「ターン終了」ボタンを押して相手のターンに移ります。

### 5. UI概要
*   **ヘッダー (Header)**: 現在のターン数、天候、チーム情報、ユニット数を表示します。「セーブ」「ロード」ボタンが配置されます。
*   **ゲームボード (GameBoard)**: ヘックスで構成されたメインのゲーム画面。
*   **情報パネル (InfoPanel)**: カーソルを合わせたヘックスやユニットの情報（**HP、燃料、経験値**など）を表示します。
*   **戦闘レポート (BattleReportModal)**: 戦闘結果（自軍と敵軍の損害）を分かりやすくモーダルウィンドウで表示します。

### 6. ゲーム状態の保存と読み込み (JSON)
ゲームの進行状況は、JSON形式で保存・読み込みが可能です。

#### 6.1. 機能
*   **保存 (Save)**: ヘッダーの「セーブ」ボタンを押すと、現在のゲーム状態がJSONファイルとしてダウンロードされます。
*   **読み込み (Load)**: ヘッダーの「ロード」ボタンを押し、保存したJSONファイルを選択するとゲーム状態が復元されます。

#### 6.2. JSONデータ構造 (スキーマ)
保存されるJSONファイルは以下の構造を持ちます。

```json
{
  "gameStatus": {
    "gameState": "playing",
    "turn": 5,
    "activeTeam": "Blue",
    "winner": null,
    "weather": "Rain",
    "weatherDuration": 2
  },
  "board": {
    "tiles": [
      { "x": -12, "y": -6, "terrain": "Mountain" },
      { "x": 0, "y": 0, "terrain": "City", "owner": "Blue", "hp": 8, "maxHp": 10 }
      // ...
    ]
  },
  "units": [
    {
      "id": "u-0",
      "type": "Tank",
      "team": "Blue",
      "x": -5,
      "y": 0,
      "hp": 18,
      "fuel": 35,
      "xp": 12,
      "moved": false,
      "attacked": false
    }
    // ...
  ]
}
```
